timely.define("scripts/add_new_event/facebook_export",["jquery_timely","external_libs/bootstrap/collapse","external_libs/bootstrap/modal","external_libs/bootstrap/button"],function(e){var t=function(t){!e(this).is(":checked")&&e("#ai1ec-facebook-export-modal").length?e("#ai1ec-facebook-export-modal").modal({show:!0,backdrop:"static"}):e("#ai1ec-remove-fb-event-hidden").remove()},n=function(){e("#ai1ec-facebook-export-modal").modal("hide");if(e(this).hasClass("remove")){var t=e("<input />",{type:"hidden",name:"ai1ec-remove-event",value:1,id:"ai1ec-remove-fb-event-hidden"});e("#ai1ec-facebook-publish").append(t)}else e("#ai1ec-remove-fb-event-hidden").remove()},r=function(){var t=e(this),n=t.closest("#ai1ec-facebook-publish"),r={action:"ai1ec_refresh_tokens"};t.button("loading"),e.post(ajaxurl,r,function(e){var r=n.find(".ai1ec-page-choices");t.button("reset"),r.length?r.replaceWith(e):n.find(".ai1ec-refresh-fb-pages").before(e)},"json")},i=function(t){var n=e("#ai1ec-fb-collapse");n.length&&n.collapse(this.checked?"show":"hide")};return{open_modal_on_unpublish:t,add_hidden_field_when_user_click_remove_in_modal:n,show_page_choices_when_present:i,refresh_list_of_pages:r}}),timely.define("scripts/facebook_export",["jquery_timely","domReady","scripts/add_new_event/facebook_export"],function(e,t,n){var r=function(){e("#ai1ec-facebook-export").on("click",n.open_modal_on_unpublish).on("click",n.show_page_choices_when_present),e(document).on("click","#ai1ec-refresh-fb-pages",n.refresh_list_of_pages),e("#ai1ec-facebook-export-modal").on("click",".remove, .keep",n.add_hidden_field_when_user_click_remove_in_modal)},i=function(){t(function(){r()})};return{start:i}}),timely.require(["scripts/facebook_export"],function(e){e.start()}),timely.define("pages/facebook_export",function(){});